@page "/AnalyticHome"
@inject IDialogService DialogService
<MudContainer Fixed="true" MaxWidth="MaxWidth.Large">

<MudGrid >

        <MudItem  xs=12 sm=6>
        <MudButton @onclick="PeriodFilter" Variant="Variant.Filled" Color="Color.Primary">
            @ResForBodyPage.Period
        </MudButton>
</MudItem>

        <MudItem xs=12 sm=6>
        <MudDateRangePicker PickerVariant="PickerVariant.Inline" Modal="false" />
    </MudItem>

    <MudItem  sm="3" xs="6">
            <MudText><b>Name:</b> @element.Name</MudText>

     </MudItem>
    <MudItem  sm="3" xs="6">
            <MudText><b>Name:</b> @element1.Name</MudText>
       
     </MudItem>
    <MudItem  sm="3" xs="6">
            <MudText><b>Name:</b> @element2.Name</MudText>

     </MudItem>
        <MudItem xs="6" sm="3"
                 Class="d-flex justify-sm-end justify-center pr-sm-4">
            <MudFab Color="Color.Success"
                    StartIcon="@Icons.Material.Filled.TableChart"
                    Size="Size.Large"
                    Class="my-1" />
        </MudItem>
        <MudPaper class="d-flex justify-start  pr-sm-4" Width="Auto">
       <MudList T="string">
           <MudListItem>
               <AvatarContent>
                   <MudAvatar>
                       <!--image-->
                   </MudAvatar>
               </AvatarContent>
               <ChildContent>
                   Сотрудник 1
               </ChildContent>
           </MudListItem>
           <MudListItem>
               <AvatarContent>
                   <MudAvatar>
                       <!--image-->
                   </MudAvatar>
               </AvatarContent>
               <ChildContent>
                   Сотрудник 2
               </ChildContent>
           </MudListItem>
       </MudList>
   </MudPaper>
        <MudItem Class="d-flex justify-end justify-sm-end" sm="6" xs="12">

    <MudChart ChartType="ChartType.Pie" InputData="@data" @bind-SelectedIndex="Index" InputLabels="@labels" Width="300px" Height="300px" />
      </MudItem>
    


       
</MudGrid>
</MudContainer>

@code {
    private int Index = 1; //default value cannot be 0 -> first selectedindex is 0.
    int dataSize = 4;
    double[] data = { 77 };
    string[] labels = { "Uranium", "Plutonium", "Thorium", "Caesium", "Technetium", "Promethium",
                        "Polonium", "Astatine", "Radon", "Francium", "Radium", "Actinium", "Protactinium",
                        "Neptunium", "Americium", "Curium", "Berkelium", "Californium", "Einsteinium", "Mudblaznium" };

    Atom element = new Atom { Name = "В работе"};
    Atom element1 = new Atom { Name = "Выполнено"};
    Atom element2 = new Atom { Name = "Всего"};
    public class Atom
    {
        public string Name { get; set; }

    }
    private async Task PeriodFilter()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        var dialoge = await DialogService.ShowAsync<DialogPer>($"{@ResForBodyPage.Period}", options);
        StateHasChanged();
        var changedPeriod = await dialoge.Result;
        if (changedPeriod.Canceled) { StateHasChanged(); }
        else { StateHasChanged(); }

    }
}
